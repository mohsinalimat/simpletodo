<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New TODO Group</title>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/custom/style.css">

    <!-- UIkit CSS -->
    <link rel="stylesheet" href="../assets/uikit/css/uikit.min.css" />

    <!-- UIkit JS -->
    <script src="../assets/uikit/js/uikit.min.js"></script>
    <script src="../assets/uikit/js/uikit-icons.min.js"></script>

</head>
<body class="hide-overflow">
    <!-- Custom Titlebar Begin-->
    <div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
        <div class="uk-navbar titlebar-slim titlebar-moveable" uk-navbar>
            <div class="uk-navbar-left uk-margin-small-left">
            <img src="../assets/img/icon.ico" width="20" height="20" alt="">
            <span class="uk-margin-small-left uk-text-meta text-white">Simple TODO</span>
            </div>
            <div class="uk-navbar-right">
                <div id="minimize" class="titlebar-button minimize uk-margin-small-right"></div>
                <div id="quit" class="titlebar-button quit uk-margin-small-right"></div>
            </div>
        </div>
    </div>
    <!-- Custom Titlebar End -->

    <div class="uk-container uk-text-left uk-margin-small-top">
    <form>
        <fieldset class="uk-fieldset">
            <div class="uk-margin">
                <label class="uk-form-label" for="form-stacked-text">Group Name<hr></label>
                <input class="uk-input" id="groupName" type="text">
            </div>
            <div class="uk-margin">
                <label class="uk-form-label" for="form-stacked-text">Items<hr></label>
                <textarea class="uk-textarea uk-height-small" placeholder="item1&#13;item2&#13;item3" id="contents"></textarea>
            </div>
            <div class="uk-margin">
                <label class="uk-form-label" for="form-stacked-text">TODO Priority<hr></label>
                <select id="priority" class="uk-select">
                    <option>HIGH</option>
                    <option>MEDIUM</option>
                    <option>LOW</option>
                    <option>FINISHED</option>
                </select>
            </div>
            <div class="uk-position-bottom-left uk-position-small">
                <span id="submit" class="uk-button uk-button-primary">Add</span>
                <span id="cancel" class="uk-button uk-button-danger">Cancel</span>
            </div>
        </fieldset>
    </form>
    </div>

    <script>
        const electron = require("electron");
        require('../renderers/renderer.js');
        const { ipcRenderer } = electron; 

        let cancelBtn = document.querySelector("#cancel");
        let addBtn = document.querySelector("#submit");

        cancelBtn.addEventListener("click",() =>{
            window.close()
        });

        addBtn.onclick = function() {
            const group = document.querySelector("#groupName").value;
            const items = document.querySelector("#contents").value;
            const priority = document.querySelector("#priority").value;
            if(group && items){
                ipcRenderer.send("Group:add",`${group} | ${items} | ${priority}`)
            }else{
                UIkit.notification.closeAll();    
                UIkit.notification({message:"<span uk-icon='icon: warning'></span> Please fill the form!",status:'warning'});
            }
        }
    </script>
</body>
</html>